<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:form="sap.ui.layout.form"
	xmlns:l="sap.ui.layout"
	xmlns:core="sap.ui.core"
	>
	<Dialog
		showHeader="false"
		contentWidth="550"
		contentHeight="570px"
		placement="Bottom" >
		<NavContainer
			id="navCon">
			<Page
				id="master"
				title="{i18n>Dialog.New.Contract}">
					<Wizard id="CreateCNWizard"
								finishButtonText="{i18n>Common.Button.Done}"
								complete="onNewCNClose">
							<WizardStep id="duration"
										title="{i18n>Lbl.Duration}"
										validated="false"
										activate="onNewCNDurationValidate">
								<form:SimpleForm
								editable="true">
									<Label text="{i18n>TreeTable.Column.StartDate}" required="true"/>
									<DatePicker id="StartDate" value="{viewModel>/CNTemplate/StartDate}" valueFormat="yyyyMMdd" 
		                           		valueState="{= ${viewModel>/NewCN/error/StartDate} ? 'Error': 'None'}"
		                           		change="onNewCNStartDate"/>
									<Label text="{i18n>Lbl.Duration}" required="false"/>
									<HBox width="60%" alignItems="Start" justifyContent="Start">
										<StepInput
			                            value="{viewModel>/duration}"
			                            displayValuePrecision="1"
			                            min="1"
			                            max="999"
			                            width="100%"
			                            step="1"
			                            largerStep="3"
			                            enabled="true"
			                            editable="true"
			                            change="onNewCNDuration">
									
									</StepInput> 
			                        <ComboBox id="durationUnit" items="{viewModel>/durationUnits}" selectedKey="{viewModel>/durationUnitKey}"  width="100%">
			                        	<core:Item key="{viewModel>key}" text="{viewModel>text}" />
			                        
			                        </ComboBox>  
			                        </HBox>
			                        
			                        <Label text="{i18n>TreeTable.Column.EndDate}" required="true"/>
									<DatePicker  id="EndDate" value="{viewModel>/CNTemplate/EndDate}" valueFormat="yyyyMMdd" 
		                           		valueState="{= ${viewModel>/NewCN/error/EndDate} ? 'Error': 'None'}"
		                           		change="onNewCNEndDate"/>
									<Label text="{i18n>UF.LeaseStartDate}" required="true"/>
									<DatePicker  id="LeaseStart" value="{viewModel>/CNTemplate/userfields/ZZHDATE}" valueFormat="yyyyMMdd" 
		                           		valueState="{= ${viewModel>/NewCN/error/LeaseStart} ? 'Error': 'None'}"
		                           		change="onNewCNLeaseStart"/>
								</form:SimpleForm>
							</WizardStep>	
							<WizardStep id="bp"
										title="{i18n>TreeTable.Column.Customer}"
										validated="true">
								
								<MenuButton text="{= ${viewModel>/addMainBP} ? 'Add Main Customer' : 'Add Other Contact'}" buttonMode="Split" type="Default" defaultAction="onBPAdd" useDefaultActionOnly="true">
									<menu>
										<Menu itemSelected="onBPAdd">
											<items>
												<MenuItem text="Add Main Customer" icon="sap-icon://customer"/>
												<MenuItem text="Add Other Contact" icon="sap-icon://add-contact"/>
											</items>
										</Menu>
									</menu>
								</MenuButton>
								<List id="listBP" mode="Delete" delete="onBPDelete" items="{viewModel>/CNTemplate/bp}">
									<StandardListItem
											title="{viewModel>BusinessPartnerFullName}"
											description="{viewModel>BusinessPartner}"
											info="{= ${viewModel>BusinessPartnerRole} === ${viewModel>/mainBPRole} ? 'Main Customer' : 'Contact' }"
											infoState="{= ${viewModel>BusinessPartnerRole} === ${viewModel>/mainBPRole} ? 'Success' : 'Warning' }"
											type="Active"
										>
										<customData>
												<core:CustomData key="BusinessPartner" value="{viewModel>BusinessPartner}"/>
										</customData>
									</StandardListItem>	
								</List>
								
							</WizardStep>
					</Wizard>			
				<footer>
					<Toolbar>
						<ToolbarSpacer/>
						<Button
							text="{i18n>Common.Button.Cancel}"
							press="onNewCNCancel" />	
					</Toolbar>
				</footer>
			</Page>
		</NavContainer>
	</Dialog>
</core:FragmentDefinition>