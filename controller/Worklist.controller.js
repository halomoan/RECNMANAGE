/*
 * Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["fin/re/conmgmts1/controller/BaseController","fin/re/conmgmts1/model/formatter"],function(B,f){"use strict";return B.extend("fin.re.conmgmts1.controller.Worklist",{formatter:f,onInit:function(){},onAfterRendering:function(){var v=this.getView();var m=v.getModel();m.attachRequestCompleted(function(){var a=m.getMetaModel();var e=a.getODataEntitySet("ContractDataSet");if(e.hasOwnProperty("sap:searchable")&&e["sap:searchable"]==="true"){v.byId("smartFilterBarWithBasicSearch").setVisible(true);v.byId("contractsWithBasicSearch").setVisible(true);v.byId("smartFilterBarWithoutBasicSearch").setVisible(false);v.byId("contractsWithoutBasicSearch").setVisible(false);}else{v.byId("smartFilterBarWithBasicSearch").setVisible(false);v.byId("contractsWithBasicSearch").setVisible(false);v.byId("smartFilterBarWithoutBasicSearch").setVisible(true);v.byId("contractsWithoutBasicSearch").setVisible(true);}});},onPress:function(e){this._showContract(e.getSource());},onNavBack:function(){var h=sap.ui.core.routing.History.getInstance(),p=h.getPreviousHash();var c=sap.ushell.Container.getService("CrossApplicationNavigation");if(p!==undefined){history.go(-1);}else{c.toExternal({target:{shellHash:"#Shell-home"}});}},_showContract:function(i){var r=this._parseRoutingFromItem(i);this.getRouter().navTo(this._parseNavTarget(r),r);},_parseNavTarget:function(r){if(r.hasOwnProperty("systemId")){return"systemContract";}else{return"contract";}},_parseRoutingFromItem:function(i){var r={};var p=i.getBindingContext().getPath();var k=p.indexOf("(");var a=p.lastIndexOf(")");var b=p.substring(k+1,a);var c=b.split(",");c.forEach(function(d){var e=this._parseKeyPart(d.trim());r[e.key]=e.value;},this);return r;},_parseKeyPart:function(k){var a=k.indexOf("=");var v=k.substring(a+2,k.length-1);var r=k.substring(0,a);var b;if(r==="SAP__Origin"){b="systemId";}else if(r==="Bukrs"){b="companyCode";}else if(r==="Recnnr"){b="contractId";}else{return{};}return{key:b,value:v};}});});
