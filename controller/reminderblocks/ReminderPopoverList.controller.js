/*
 * Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["fin/re/conmgmts1/controller/BaseController","fin/re/conmgmts1/model/formatter"],function(B,f){'use strict';return B.extend('fin.re.conmgmts1.controller.reminderblocks.ReminderPopoverList',{formatter:f,onInit:function(){this._showCompletedReminders=false;},onAfterRendering:function(){this._rebindTable();},_rebindTable:function(){var v=this.getView().getId();var r=sap.ui.getCore().byId(v+"--"+"reminderListPopover");var a;if(this._showCompletedReminders){a=[];}else{a=[new sap.ui.model.Filter("Rsdone",sap.ui.model.FilterOperator.EQ,"false")];}var b=r.getBinding("items");b.filter(a);},formatterForTranslatedReminderTitle:function(d,a){var t=f.reminderTitle(d,a);return this.getModel("i18n").getResourceBundle().getText(t);},onDoneButtonPressed:function(e){e.preventDefault();var i=e.getSource().getId();sap.ui.getCore().byId(i.replace("doneButton","commentDisplayArea")).setVisible(false);var a=sap.ui.getCore().byId(i.replace("doneButton","editArea"));a.setVisible(true);},enableDoneButton:function(d){return!d;},onSaveButtonPressed:function(e){var t=this;var p=e.getSource().getBindingContext().sPath;var d=e.getSource().getBindingContext().getObject();d.Rsdone=true;this.getView().getModel().update(p,d,{merge:false,success:function(){t.getView().getModel().resetChanges();}});var i=e.getSource().getId();var a=sap.ui.getCore().byId(i.replace("saveButton","editArea"));a.setVisible(false);var c=sap.ui.getCore().byId(i.replace("saveButton","commentDisplayArea"));c.setVisible(true);var b=sap.ui.getCore().byId(i.replace("saveButton","doneButton"));b.setVisible(false);},onCancelButtonPressed:function(e){this.getView().getModel().resetChanges();var i=e.getSource().getId();var a=sap.ui.getCore().byId(i.replace("cancelButton","editArea"));a.setVisible(false);var d=sap.ui.getCore().byId(i.replace("cancelButton","commentDisplayArea"));d.setVisible(true);},onReminderFilterSelection:function(e){var k=e.getSource().getSelectedKey();if(k==="all"){this._showCompletedReminders=true;}else{this._showCompletedReminders=false;}this._rebindTable();}});});
